<!DOCTYPE HTML>
<html>

<head>
    <title>Mandelbrott</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body id="body">

    <div ondragover="dragOverHandler(event);" ondrop="dropHandler(event);">
        <svg id="svg_bg" viewBox="-128 -128 256 256" width="100%" height="100vh" top="0" left="0" position="fixed">
            <title>Mandelbrot</title>
            <g id="viewmatrix">
                <g id="bg" />
                <path id="mousePath" d="" fill="none" stroke="red" stroke-width="0.01" />
                <g id="edges" />
            </g>
        </svg>
    </div>


    <svg id="debug_layer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" style="position: absolute; left:0px; top:0px; display:none; visibility:hidden; width: 100%; height: 100vh;">
        <style>
            .white {
                font: 12px sans-serif;
                fill: white;
            }
        </style>
        <text x="0" y="0" class="white">fps:</text>
    </svg>



    <div class="dropdown">
        <div class="menu-button">
            <div class="menu-icon"></div>
        </div>
        <div class="dropdown-content">
            <div style="display: none;" id="search-results">
                <div class="submenu">

                </div>
            </div>
            <div>
                <div class="tabs">
                    <button class="tablink" onclick="openTab('tab1', this)">Notes</button>
                    <button class="tablink" onclick="openTab('tab4', this)">Ai</button>
                    <button class="tablink" onclick="openTab('tabExtract', this)">Context</button>
                    <button class="tablink" onclick="openTab('tab2', this)">Settings</button>
                    <button class="tablink" onclick="openTab('tab3', this)">?</button>
                </div>

                <div id="tab1" class="tabcontent">
                    <!-- First tab content here -->
                    <div class="submenu">
                        <input id="Searchbar" class="Searchbar" placeholder="search notes..." />
                        <br />
                        <br />
                        <form id="prompt-form" onsubmit="sendMessage(event);">
                            <div class="input-group">
                                <textarea id="prompt" rows="1" onkeydown="handleKeyDown(event);" oninput="autoGrow(event);" placeholder="Enter prompt..." required></textarea>

                                <div class="btn-group">
                                    <button type="submit">⏵</button>

                                    <button id="regen-button" type="button">↺</button>
                                </div>
                            </div>
                        </form>
                        <br />
                        <textarea id="note-input" class="zettelkasten" rows="10" cols="50"></textarea>
                        <br />
                        <div class="checkboxarray">
                            <div>
                                <input type="checkbox" id="google-search-checkbox" name="enable-search">
                                <label for="google-search-checkbox">: Search</label>

                            </div>
                            <div>
                                <input type="checkbox" id="code-checkbox" name="code-checkbox">
                                <label for="code-checkbox">: Code</label>
                            </div>
                            <div>
                                <input type="checkbox" id="auto-mode-checkbox">
                                <label for="auto-mode-checkbox">: Auto</label>
                            </div>
                            <div>
                                <input type="checkbox" id="embed-checkbox">
                                <label for="embed-checkbox">: Extracts</label>
                            </div>
                            <div>
                                <input type="checkbox" id="enable-wolfram-alpha" name="enable-wolfram-alpha">
                                <label for="enable-wolfram-alpha">: Wolfram</label>
                            </div>
                            <div>
                                <input type="checkbox" id="wiki-checkbox">
                                <label for="wiki-checkbox">: Wiki</label>


                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab2" class="tabcontent">
                    <!-- Second tab content here -->
                    <div class="submenu">
                        <br />
                        <a id="save-button">Save</a>
                        <input id="save-or-load" type="text" placeholder="save data..." />
                        <a id="load-button">Load</a>
                        <a id="clear-button">Clear</a>
                        <div id="clear-sure" style="display:none">
                            <a id="clear-unsure-button">no</a>
                            <a id="clear-sure-button">yes</a>
                        </div>
                        <br />
                        <input type="text" id="node-tag" class="tags" value="node:" />
                        <label for="node-tag"></label>
                        <br />
                        <input type="text" id="ref-tag" class="tags" value="ref:" />
                        <label for="ref-tag"></label>
                        <br />
                        <br />
                        <div id="quality_value">Quality</div>
                        <input id="quality" type="range" min="0" max="100" value="0">
                        <div id="length_value">Length</div>
                        <input id="length" type="range" min="0" max="100" value="50">
                        z <sup id="exponent_value" style="color: powderblue">2</sup> + c
                        <input id="exponent" type="range" min="1" max="8" value="2">
                        <br />
                        <div id="coordinates" style="background-color: none;background-color: none; color:none; position: inherit; display: initial; left: 0px; top: 0px;">
                            pan:
                            <input id="pan" type="text" value="0+0i" style="background:none; border:none;" size="28" />
                            <br />
                            zoom:
                            <input id="zoom" type="text" value="1" style="background:none; border:none;" size="25" />
                            <br />
                            <br />
                            <div id="fps" style="display:flex; justify-content:flex-start;">fps:?? (is javascript enabled?)</div>


                        </div>
                    </div>
                </div>

                <div id="tab3" class="tabcontent">
                    <div id="howto" class="howto custom-scrollbar">
                        <table>
                            <tr>
                                <td><input type="checkbox" id="instructions-checkbox"><label for="instructions-checkbox"><br /><strong> AI HOW-TO</strong></label></td>
                                <td>Allows the ai to explain the website and its controls.</td>
                            </tr>
                            <tr>
                                <td><a href="https://github.com/satellitecomponent/Neurite" id="clickable-link">Github Link</a></td>
                                <td>Visit our Github for extended documentation.</td>
                            </tr>
                            <tr>
                                <td><strong>CLICK AND DRAG</strong></td>
                                <td>Move around the fractal.</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>
                                        SCROLL WHEEL
                                        <br />PINCH on touchpad
                                    </strong>
                                </td>
                                <td>Zoom in/out.</td>
                            </tr>
                            <tr>
                                <td><strong>SHIFT + DOUBLE CLICK</strong></td>
                                <td>Creates a text node</td>
                            </tr>
                            <tr>
                                <td><strong>ALT + SCROLL</strong></td>
                                <td>Rotate the view.</td>
                            </tr>
                            <tr>
                                <td><strong>ALT + CLICK</strong></td>
                                <td>Selects multiple nodes. Allows for multiple nodes to be re-scaled</td>
                            </tr>
                            <tr>
                                <td><strong>ALT + DOUBLE CLICK</strong></td>
                                <td>Creates an ai chat node</td>
                            </tr>
                            <tr>
                                <td><strong>DOUBLE CLICK</strong></td>
                                <td>'Anchor' a window in place.</td>
                            </tr>
                            <tr>
                                <td><strong>SHIFT (hold)</strong></td>
                                <td>Toggle 'Node-Mode'. <br />Freezes Windows</td>
                            </tr>
                            <tr>
                                <td><strong>SHIFT + SCROLL</strong></td>
                                <td>Resize a window.</td>
                            </tr>
                            <tr>
                                <td><strong>LocalHost Servers</strong></td>
                                <td>Wiki, Wolfram, and Webpage Extraction currently require setting up of personal localhosts.<br />Visit the Github link for more information.<br /> The Ai How-To Checkbox at the top of the instructions will allow the ai to explain basic set-up.</td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="tab4" class="tabcontent">
                    <!-- Fourth tab content here -->
                    <div class="submenu">
                        <div>
                            <label for="api-key-input">OpenAI API Key:</label>
                            <input type="password" id="api-key-input">
                        </div>

                        <div class="google-key-input">
                            <label for="googleApiKey">Google API Key:</label>
                            <input type="password" id="googleApiKey">
                        </div>
                        <div class="google-key-input">
                            <label for="googleSearchEngineId">Google Search Engine ID:</label>
                            <input type="password" id="googleSearchEngineId">
                        </div>
                        <div class="wolfram-key-input">
                            <label for="wolframApiKey">Wolfram API Key:</label>
                            <input type="password" id="wolframApiKey">
                        </div>
                        <br />
                        <button class="key-button" onclick="saveKeys()">Save Keys</button>
                        <button class="key-button" onclick="clearKeys()">Clear Keys</button>
                        <br />
                        <br />
                        <div>
                            <label for="model-select">Choose a model:</label>
                            <select id="model-select" class="model-selector" onchange="checkOtherModel(this)">
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                <option value="gpt-4">GPT-4</option>
                                <option value="other">Other...</option>
                            </select>
                            <input id="model-input" class="model-input" style="display: none;" placeholder="Enter model name">
                            <input id="model-input" style="display: none;" placeholder="Enter model name">
                        </div>
                        <label for="max-tokens-slider">Max Tokens: <span id="max-tokens-display">2000</span></label>
                        <input type="range" id="max-tokens-slider" name="max-tokens-slider" min="1" max="32000" value="2000">
                        <label id="model-temperature-label" for="model-temperature">Model Temperature: 0.1</label>
                        <input type="range" id="model-temperature" name="model-temperature" class="slider" min="0" max="1" step="0.1" value="0.1" onchange="updateLabel()">
                        <br />
                        <input type="checkbox" id="novelty-checkbox"><label for="novelty-checkbox"><strong>: Novelty <br />(Shuffled Wiki Results)</strong></label>
                        <br />
                        <br />
                        <input type="checkbox" id="ai-nodes-checkbox">
                        <label for="ai-nodes-checkbox"><strong>: AI Generated AI Nodes <br />(or, Alt + Double Click / type LLM:)</strong></label>
                    </div>
                </div>
                <div id="tabExtract" class="tabcontent">
                    <!-- Extract tab content here -->
                    <div class="submenu">
                        <label for="inputKeyExtract">Key:</label><br>
                        <input type="text" id="inputKeyExtract" name="inputKeyExtract"><br>
                        <label for="inputTextExtract">Text:</label><br>
                        <textarea id="inputTextExtract" rows="10" cols="50" class="zettelkasten"></textarea><br>
                        <div class="button-container">
                            <button id="chunkAndStoreButton" class="linkbuttons">Store Chunks</button>
                            <button onclick="deleteSelectedKeys()" class="linkbuttons">Delete Key(s)</button>
                        </div>
                        <strong><p style="font-weight: bold;">Stored Keys</p></strong>
                        <div id="key-list" class="scrollable-list">
                            <!-- Stored keys will be dynamically added here -->
                        </div>
                        <br />
                        <div>
                            <label for="topN">Top <span id="topNValue">5</span> Webpage Excerpts</label>
                            <input type="range" id="topNSlider" name="topN" min="1" max="100" value="5">

                        </div>
                        <div class="slidecontainer">
                            <label for="maxChunkSizeSlider"></label>Max Chunk Size: <span id="maxChunkSizeValue"></span></label>
                            <input type="range" min="1" max="4000" value="256" class="slider" id="maxChunkSizeSlider">
                        </div>
                        <div>
                            <label for="overlapSize">Overlap Size:</label>
                            <span id="overlapSizeDisplay">10</span>
                            <input type="range" id="overlapSizeSlider" name="overlapSize" min="1" max="100" value="10">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="nodes">

        <!-- add stuff here -->

    </a>
    <!--iframe id="inlineFrameExample"
            title="Inline Frame Example"
            width="150"
            height="100"
            src="https://m.media-amazon.com/images/M/MV5BOTY2NDY4OGUtYWE0Ni00NWZiLWI3NDktYmE2YWM3Njc3YmRkXkEyXkFqcGdeQXVyMTIxOTU1MjQ3._V1_.jpg">
    </iframe>

    <iframe id="inlineFrameExample"
            title="Inline Frame Example"
            width="768"
            height="512"
            src="https://xkcd.com">
    </iframe>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="red"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="orange"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="yellow"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="green"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="blue"/></svg>
    <svg width="20" height="20"><circle cx="10" cy="10" r="10" fill="purple"/></svg>


    </a-->
    <div id="elements" class="windowbuttons" style="display:none; visibility:hidden;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 2.125" height="16pt">
            <g id="button-delete" transform="scale(0.125 0.125) translate(1 1)">
                <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
                <path d="M 1,1 l 3,0 4,4 4,-4 3,0
	     0,3 -4,4 4,4 0,3
	     -3,0 -4,-4 -4,4 -3,0
	     0,-3 4,-4 -4,-4 0,-3 z" fill="RGB(170,170,170)" stroke="none" />
            </g>

            <g id="button-fullscreen" transform="scale(0.125 0.125) translate(21 1)">
                <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
                <path d="M  1, 1 l 3,0 1.5,1.5 -3,0 0,3 -1.5,-1.5 0,-3 z
	     M 15, 1 l -3,0 -1.5,1.5 3,0 0,3 1.5,-1.5 0,-3 z
	     M 15,15 l -3,0 -1.5,-1.5 3,0 0,-3 1.5,1.5 0,3 z
	     M  1,15 l 3,0 1.5,-1.5 -3,0 0,-3 -1.5,1.5 0,3 z
	     M  4, 4 l 2,0 1,1 -2,0 0,2 -1,-1 0,-2 z
	     M 12, 4 l -2,0 -1,1 2,0 0,2 1,-1 0,-2 z
	     M 12,12 l -2,0 -1,-1 2,0 0,-2 1,1 0,2 z
	     M  4,12 l 2,0 1,-1 -2,0 0,-2 -1,1 0,2 z
	     " fill="RGB(170,170,170)" stroke="none" />
            </g>

            <g id="button-collapse" transform="scale(0.125 0.125) translate(41 1)">
                <rect x="0" y="0" width="16" height="16" fill="RGB(100,100,100)" stroke="none" />
                <circle cx="8" cy="8" r="5.375" stroke="RGB(170,170,170)" stroke-width="2.75" fill="none" />
            </g>

        </svg>



    </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js"></script>
    <script src="zettelkasten.js"></script>
    <script src="dropdown.js"></script>
    <script src="interface.js"></script>
    <script src="ai.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>

</html>
